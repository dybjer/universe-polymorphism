\documentclass{lmcs}
%\usepackage{etex}
\usepackage[utf8]{inputenc}

\usepackage{color}
\usepackage{hyperref}
\usepackage{float}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amsthm}
\usepackage{amssymb}
\usepackage{proof}
\usepackage{mathpartir}
\usepackage{mathrsfs}
\usepackage{stmaryrd}
\usepackage{cmll}
\usepackage{enumerate}
\usepackage{graphicx}
\usepackage[all]{xy}
\usepackage{listings}
\usepackage{todonotes}
\usepackage{Guyboxes}
\input{macros}
\input{newmacros}
\def\UU{\mathrm{U}}
\def\Ta{\mathrm{T}}
\def\Pihat{\hat{\Pi}}
\def\UUhat{\hat{\UU}}
\def\Level{\mathrm{Level}}
\def\t{\mathrm{t}}

\newcommand{\intCtxU}[1]{\llbracket #1 \rrbracket^\RawCtx}
\newcommand{\intSubU}[1]{\llbracket #1 \rrbracket^\RawSub}
\newcommand{\intTyU}[1]{\llbracket #1 \rrbracket^\RawTy}
\newcommand{\intTmU}[1]{\llbracket #1 \rrbracket^\RawTm}

\title{Initial Categories with Families\\with Universe Tower Structures\\ 
a la Tarski and a la Russell}

\begin{document}

\maketitle

\begin{abstract}
We define the notion of a $\Pi\UU$-tower-cwf as a category with families with a $\Pi$-structure and a structure for a tower of universes $\UU$ closed under $\Pi$. Then we construct syntax and inference rules for two systems of type theory with $\Pi$-types and a $\UU$-tower, one formulated a la Tarski, the other a la Russell. We prove that both systems yield initial $\Pi\UU$-tower-cwfs in the category of $\Pi\UU$-tower-cwfs and cwf-morphisms strictly preserving $\Pi$ and $\UU$-tower-structure. It follows that the system a la Russell is isomorphic to the system a la Tarski in that category.
 \end{abstract}

%\tableofcontents
\allowdisplaybreaks
\section{Introduction}

Martin-Löf type theory can be interpreted in categories with families (cwfs) with suitable extra structure for the type formers. Furthermore, appropriate versions of Martin-Löf type theory can be characterized  abstractly as free or initial such cwfs with extra structure. Such a construction has been worked out in detail for cwfs with structures for $\Pi, \Sigma$, and the extensional identity type former $\I$ \cite{castellan:tlca2015}. 

In the present paper we extend that construction by introducing a notion of a universe tower structure on a cwf. For simplicity, we start with a cwf with a $\Pi$-structure and consider a tower of universes closed under $\Pi$-types. A cwf with both $\Pi$ and $\UU$-tower-structures is called a $\Pi\UU$-tower-cwf. We then build an initial  $\Pi\UU$-tower cwf  following the recipe in \cite{castellan:tlca2015}. This results in syntax and inference rules for a universe a la Tarski. Finally, we modify this construction and build an initial  $\Pi\UU$-tower-cwf  with syntax and inference rules for a universe a la Russell.

It is straightforward to extend our definitions and constructions to a universe closed under other type formers too.

$\Pi\UU$-tower-cwfs can be presented as models of a certain infinitary generalized algebraic theory (gat) in the sense of Cartmell \cite{cartmell:phd}. Bezem, Coquand, Dybjer, and Escardo \cite{bezem:hofmann} have provided an alternative semantic definition of finitary gats, and also shown a general construction of an initial object $\T_\Sigma$ in the category $\Cwf_\Sigma$ of models of an arbitrary finitary gat $\Sigma$. In the paper we outline how to extend our result to certain infinitary gats, including the gat of $\Pi\UU$-tower-cwfs. Note however, that in that way we obtain a $\T_\Sigma$ that is an initial cwf with an {\em internal} $\Pi\UU$-tower-cwf rather than an initial $\Pi\UU$-tower-cwf, and that the general construction yields an internal $\Pi\UU$-tower-cwf with a tower of universes a la Tarski. There is an alternative construction of an internal $\Pi\UU$-tower.cwf with a tower of universes a la Russell, but we do not spell out the details here.

\section{The category of $\Pi\UU$-tower-cwfs}

 A $\Pi \UU$-tower-cwf is a cwf with a $\Pi$-structure and a structure for a tower of universes closed under $\Pi$.
 
This means that we have a family of universe structures (in the sense of the paper about one universe) indexed by $n \in \N$, that is, we have $\UU_{n,\Gamma} \in \Ty(\Gamma)$, $\Ta_n(a) \in \Ty(\Gamma)$ and $\Pihat^n(a,b) \in \Tm(\Gamma,\UU_{n,\Gamma})$ provided $\Gamma \in \Ctx$ and $a  \in \Tm(\Gamma,\UU_{n,\Gamma})$ and 
$b \in \Tm(\Gamma . \Ta_n(a),\UU_{n,\Gamma . \Ta_n(a)})$ with the equations:
\begin{eqnarray*}
\Ta_n(\Pihat^n(a,b)) &= &\Pi(\Ta_n(a),\Ta_n(b))\\
\Ta_n(\UUhat^n_{\Gamma}) &= &\UU_{n,\Gamma}\\
\UU_{n,\Gamma}[\gamma] &=& \UU_{n,\Delta}\\
\Ta_n(a)[\gamma] &=& \Ta_n(a[\gamma])\\
\Pihat^n(a,b)[\gamma] &=& \Pihat^n(a[\gamma],b[\gamma^+])
\end{eqnarray*}
where $\gamma \in \Sub(\Delta,\Gamma)$.

Moreover, we have $\UUhat^n_{\Gamma} \in \Tm(\Gamma,\UU_{n+1,\Gamma})$ with the equation
\begin{eqnarray*}
\UUhat^n_\Gamma[\gamma] &=& \UUhat^n_\Delta
\end{eqnarray*}

Finally, we consider here a cumulative tower and add the lifting operation $\t_n(a) \in \Tm(\Gamma,\UU_{n+1,\Gamma})$ with the equations
\begin{eqnarray*}
\t_n(\Pihat^n(a,b)) &= &\Pihat^{n+1}(\t_n(a),\t_n(b))?? is this right?\\
\t_n(a)[\gamma] &=& \t_n(a[\gamma])\\
\end{eqnarray*}
What about $\Ta_{n+1}(\t_n(a)) = \Ta_n(a)$? It's like this in one of the Palmgren versions, where $\t_n$ is a constructor.

{\bf Remark.} In the non-cumulative case we need doubly indexed codes $\Pihat^{m,n}$ for $\Pi$.

Check typability with respect to order, cf the problem of Palmgren's typability of $\t_n$.

A strict $\Pi\UU$-tower-cwf morphism is a strict cwf-morphism that preserves $\Pi$- and universe-tower-structure strictly.

{\bf Remark.} $\Pi\UU$-tower-cwfs are models of an infinitary generalized algebraic theory. It corresponds to Martin-Löf type theory with an external sequence of universes $\UU_n$ for $n \in \N$.

\section{An initial $\Pi\UU$-tower-cwf a la Tarski}
\label{sec:syntax}
\subsection{Raw syntax}\label{sec:grammar}

%This first construction is inspired by the generalised algebraic theory of $\Pi\UU$-tower-cwfs, but here we define it as a usual logical system with a grammar and a collection of inference rules. 
The grammar has four syntactic categories: contexts $\RawCtx$,
substitutions $\RawSub$, types $\RawTy$ and terms $\RawTm$.
\begin{eqnarray*}
\Gamma \in \RawCtx &::=& 1  \ |\ \Gamma.A\\
\gamma \in \RawSub \ &::=& \gamma \circ \gamma \ |\ \id_\Gamma \ |\ \langle\rangle_\Gamma \ |\ \p_{A} \ |\ \langle \gamma, a \rangle_A\\
A \in \RawTy &::=& A[\gamma]   \ |\  \Pi(A,A)\ |\  \UU_{n,\Gamma}  \ |\  \Ta_n(a)\\
a \in \RawTm &::=& a[\gamma] \ |\ \qI_A\ |\  \ap(A,A,a,a) |\ \lambda(A,a)\ |\ \Pihat^n(a,a)\ |\ \UUhat^n_\Gamma \ |\ \t_n(a)
\end{eqnarray*}
Note that the syntactic constructions have as few annotations as possible, only what is
necessary to recover the domain and codomain of a substitution, the context of a type, and the type of a term. We first define the effect of these four functions on the pure cwf-combinators:
\begin{align*}
\dom(\gamma \circ \gamma') &= \dom(\gamma') \quad&\quad\quad & \cod(\gamma \circ \gamma') &=&\  \cod(\gamma)\\
\dom(\id_\Gamma) &= \Gamma\quad& &\cod(\id_\Gamma) &=&\  \Gamma\\
\dom(\langle\rangle_\Gamma) &= \Gamma\quad&&\cod(\langle\rangle_\Gamma) &=&\  1\\
\dom(\p_{A}) &= \ctxof(A).A\quad&&\cod(\p_{A}) &=&\  \ctxof(A) \\
\dom(\langle \gamma, a \rangle_A) &= \dom(\gamma)\quad&&\cod(\langle \gamma, a \rangle_A) &=&\  \cod(\gamma).A
\end{align*}

\begin{eqnarray*}
\ctxof(A[\gamma]) &=& \dom(\gamma)\\
&&\\
\typeof(a[\gamma]) &=&\ (\typeof(a))[\gamma]\\
\typeof(\qI_A) &=&\ A[\p_{A}]
\end{eqnarray*}
Clauses for $\Pi$:
\begin{eqnarray*}
\ctxof(\Pi(A,B)) &=& \ctxof(A)\\
&&\\
\typeof(\ap(A,B,c,a)) &=&\ B[\langle \id_{\ctxof(A)},a \rangle ]\\
\quad \typeof(\lambda(A,c)) &=& \Pi(A,\typeof(c))
\end{eqnarray*}
Clauses for $\UU$:
\begin{eqnarray*}
\ctxof(\UU_{n,\Gamma}) &=& \Gamma\\
\ctxof(\Ta_n(a)) &=& \ctxof(\typeof(a))\\
&&\\
\typeof(\Pihat^n(a,b))&=& \typeof(a)\\
\typeof(\UU^n_\Gamma &=& \Gamma\\
\typeof(\t_n(a)) &=& \UU_{n+1,\ctxof(\typeof(a))}
\end{eqnarray*}
%We let $\UU_\Gamma = \UU [ \langle\rangle_\Gamma ]$.

These functions will be used for defining the interpretation.

\subsection{Inference rules}
We simultaneously inductively define four families of partial equivalence relations (pers) for the
four forms of equality judgments:
\[
\Gamma = \Gamma' \vdash \hspace{40pt} \Gamma \vdash A = A' \hspace{40pt}
\Delta \vdash \gamma = \gamma' : \Gamma \hspace{40pt} \Gamma \vdash a = a' : A
\]
In the inference rules which generate these pers we will use the following abbreviations for the basic judgment forms:
$\Gamma \vdash$ abbreviates $\Gamma = \Gamma \vdash$, 
$\Gamma \vdash A$ abbreviates $\Gamma \vdash A = A$,
$\Delta \vdash \gamma : \Gamma$ abbreviates  $\Delta \vdash \gamma = \gamma : \Gamma$, and 
$\Gamma \vdash a : A$ abbreviates $\Gamma \vdash a = a : A
$. The inferences rules are divided into four kinds: \emph{per-rules}, which axiomatise symmetry and
transitivity of equality; \emph{preservation rules}, which express that equality preserves
judgments; \emph{congruence rules} for operators with respect to equality, and \emph{conversion
rules}.
%Note that in most papers on type-theory, only conversion rules are
%given, and the other are left implicit.

\begin{figure}
  \centering
\boxit[Per-rules for the four forms of judgments]{
  \begin{mathpar}
  \\
    	\inferrule
		{\Gamma = \Gamma' \vdash \\ \Gamma' = \Gamma'' \vdash} 
		{\Gamma = \Gamma'' \vdash}
	\and 
	\inferrule
		{\Gamma = \Gamma' \vdash} 
		{\Gamma' = \Gamma \vdash}
	\and 
	\inferrule
		{\Delta \vdash \gamma = \gamma' : \Gamma \\ 
		 \Delta \vdash \gamma' = \gamma'' : \Gamma} 
		{\Delta \vdash \gamma = \gamma'' : \Gamma}
	\and 
	\inferrule
		{\Delta \vdash \gamma = \gamma' : \Gamma} 
		{\Delta \vdash \gamma' = \gamma : \Gamma}
	\and
   	\inferrule
		{\Gamma \vdash A = A' \\ 
		 \Gamma \vdash A' = A''} 
		{\Gamma \vdash A = A''}
	\and 
	\inferrule
		{\Gamma \vdash A = A'} 
		{\Gamma \vdash A' = A}
	\and 
	\inferrule
		{\Gamma \vdash a = a' : A \\ 
		 \Gamma \vdash a' = a'' : A} 
		{\Gamma \vdash a = a'' : A}
	\and 
	\inferrule
		{\Gamma \vdash a = a' : A}
		{\Gamma \vdash a' = a : A}
  \end{mathpar}}
  \label{fig:cwf1}
\end{figure}

\begin{figure}
  \centering
  \label{fig:cwf2}
\boxit[Preservation rules for judgments]{
  \begin{mathpar}
  \\
    	\inferrule
		{{\Gamma} = {\Gamma}' \vdashS \\
		 {\Delta} = {\Delta}' \vdashS \\
		 {\Gamma} \vdashS \gamma = \gamma': {\Delta}} 
		{{\Gamma}' \vdashS \gamma = \gamma' : {\Delta}'}
	\and
	\inferrule
		{{\Gamma} = {\Gamma}' \vdashS \\ 
		 {\Gamma} \vdashS A = A'}
		{{\Gamma}' \vdashS A = A'}
	\and 
	\inferrule
		{{\Gamma} = {\Gamma}' \vdashS \\ 
		 \Gamma \vdash A = A' \\
	         {\Gamma} \vdashS a = a' : A}
		{{\Gamma}' \vdashS a = a' : A'}
  \end{mathpar}
}
\end{figure}

\begin{figure}
  \centering
  \label{fig:cwf3}
\boxit[Congruence rules for cwf-operators]{
  \begin{mathpar}
% Contextes
\\
    	\inferrule
		{ } 
		{1 = 1 \vdash }
	\and
	\inferrule
		{\Gamma = \Gamma' \vdash \\ 
		 \Gamma \vdash A = A'} 
		{\Gamma.A = \Gamma'.A'\vdash} 
	\and

% Types
	\inferrule
		{\Gamma \vdash A=A' \\ 
		 \Delta \vdash \gamma = \gamma' : \Gamma} 
		{\Delta \vdash A[\gamma] = A'[\gamma']} 
	\and

% Substitutions

	\inferrule
		{\Gamma = \Gamma' \vdashS } 
		{\Gamma \vdashS \id_\Gamma = \id_{\Gamma'} : \Gamma} 
	\and
    	\inferrule
		{\Gamma = \Gamma' \vdashS}
		{\Gamma \vdash \emptySub \Gamma = \emptySub {\Gamma'} : \emptyContext}
	\and
	\inferrule
		{{\Gamma} \vdashS \delta = \delta' : {\Delta} \\ 
		 {\Delta} \vdashS \gamma = \gamma': {\Theta} } 
		{{\Gamma} \vdashS \gamma \circ \delta = \gamma' \circ \delta' : {\Theta}} 
	\and
	\inferrule
    		{\Gamma \vdash A = A'}
		{\Gamma.A \vdash \p_{A} = \p_{A'} : \Gamma}
	\and
	\inferrule
		{\Gamma \vdash A = A' \\ 
		 \Delta \vdash \gamma = \gamma' : \Gamma \\ 
		 \Delta \vdash a = a' : A[\gamma]} 
		{\Delta\vdash \langle \gamma,a \rangle_A = \langle \gamma',a' \rangle_{A'} : \Gamma.A} 
	\and
% Termes
	\inferrule
		{\Gamma \vdash a = a' : A \\
		 \Delta \vdash \gamma = \gamma' : \Gamma} 
		{\Delta \vdash a[\gamma] = a'[\gamma'] : A[\gamma]} 
	\and 

	\inferrule
		{\Gamma \vdash A = A'}
		{\Gamma.A \vdash \qI_{A} = \qI_{A'} : A[\p_A]} 
    
  \end{mathpar}
}
\end{figure}

\begin{figure}
  \centering
  \label{fig:cwf4}
\boxit[Conversion rules for cwf-operators]{
  \begin{mathpar}
\\
     	\inferrule
		{\Delta \vdash \theta : \Theta \\ 
		 \Gamma \vdash \delta : \Delta \\ 
		 \Xi \vdash \gamma : \Gamma} 
		{\Xi \vdash (\theta \circ \delta) \circ \gamma = \theta \circ (\delta \circ \gamma) : \Theta} 
	\and
    	\inferrule
		{\Gamma \vdashS \gamma : \Delta} 
		{\Gamma \vdash \gamma = \id_\Delta \circ \gamma : \Delta}
	\and 
	\inferrule
		{\Gamma \vdashS \gamma : \Delta} 
		{\Gamma \vdash \gamma = \gamma \circ \id_\Gamma : \Delta}
	\and 
	\inferrule
		{\Gamma \vdash A \\ 
		 \Delta \vdash \gamma : \Gamma \\ 
		 \Theta \vdash \delta : \Delta} 
		{\Theta \vdash A[\gamma \circ \delta] = (A[\gamma])[\delta]}
	\and
	\inferrule
		{\Gamma \vdash A}
		{\Gamma \vdash A[\id_\Gamma] = A}
	\and
	\inferrule
		{\Gamma \vdash a : A \\ 
		 \Delta \vdash \gamma : \Gamma \\ 
		 \Theta \vdash \delta : \Delta} 
		{\Theta \vdash a[\gamma \circ \delta] = (a[\gamma])[\delta] : (A[\gamma])[\delta]}
	\and
    	\inferrule
		{\Gamma \vdash a : A}
		{\Gamma \vdash a[\id_\Gamma] = a : A} 
	\and 
	\inferrule
		{\Gamma \vdash \gamma : 1} 
		{\Gamma \vdash \gamma = \emptySub{\Gamma} : 1} 
	\and 
	\inferrule
		{\Gamma \vdash A \\ 
		 \Delta \vdash \gamma : \Gamma \\ 
		 \Delta \vdash a : A[\gamma]}
		{\Delta \vdash \p_A \circ \langle \gamma,a \rangle_A = \gamma : \Gamma} 
	\and
	\inferrule
		{\Gamma \vdash A \\ 
		 \Delta \vdash \gamma : \Gamma \\
		 \Delta \vdash a : A[\gamma]} 
		{\Delta \vdash \qI_A[\langle \gamma,a \rangle_A] = a : A[\gamma]} 
	\and 
	\inferrule
		{\Delta \vdash \gamma : \Gamma.A}
		{\Delta \vdash \gamma = \langle \p_A \circ \gamma , \qI_A[\gamma] \rangle_A : \Gamma.A}
  \end{mathpar}
}

\boxit[Rules for $\Pi$-types:]{
\begin{mathpar}
\\
    \infer {\Gamma \vdash \Pi(A,B) = \Pi(A',B')} {\Gamma \vdash
      A = A' & \Gamma.A \vdash B = B'}
    \and
    \infer{ \Gamma  \vdash   \lambda (A, b) =  \lambda (A', b') :  \Pi (A, B)}{ \Gamma   \vdash  A = A' 
    &  
    \Gamma .A  \vdash  b = b' : B} 
    \and
    \infer{ \Gamma   \vdash  \app(A, B, c, a) = \app(A', B', c', a') : B[\langle \id, a \rangle] }{ \Gamma   \vdash  A = A' &  \Gamma .A  \vdash  B = B' &  \Gamma   \vdash  c = c' :  \Pi (A, B) &  \Gamma   \vdash  a = a' : A} \and
    \infer{ \Gamma   \vdash  \app(A, B,  \lambda (A, b), a) = b[\langle \id_\Gamma, a \rangle]  : B [\langle \id, a \rangle] }{ \Gamma   \vdash  c :  \Pi (A, B) &  \Gamma   \vdash  a : A} \and
    \infer{ \Gamma   \vdash   c =  \lambda (\app(A,B,c[\p_A ], \qI_A)) :  \Pi (A, B)}{ \Gamma   \vdash  c :  \Pi (A, B)} \and
    \infer{ \Delta   \vdash   \Pi (A, B) [\gamma]  =  \Pi (A [\gamma] , B[\langle \gamma \circ \p_{A[\gamma]}, \qI_{A[\gamma]}\rangle])}{ \Gamma   \vdash  A &  \Gamma .A  \vdash  B &  \Delta   \vdash   \gamma  :  \Gamma } \and
    \infer{ \Delta   \vdash   \lambda (b)[\gamma]  =  \lambda (b [\langle \gamma \circ \p_{A[\gamma]}, \qI_{A[\gamma]}\rangle]) :  \Pi (A, B) [\gamma] }{ \Gamma   \vdash  c :  \Pi (A, B) & \Delta  \vdash   \gamma  :  \Gamma } \and
    \infer{ \Delta   \vdash  \app(c, a) [\gamma]  = \app(c [\gamma] , a [\gamma] ) : B [\langle  \gamma , a [\gamma]  \rangle] }{ \Gamma   \vdash  c :  \Pi (A, B) &  \Gamma   \vdash  a : A & \Delta  \vdash   \gamma  :  \Gamma }
  \end{mathpar}
  }
%  \caption{Inferences rules for $\Pi$-types}
  \label{fig:pi}
\end{figure}
%\footnote{Note that the rules for $\Pi$ need to be completed. 
%$\gamma^+ = \langle \gamma \circ \p_{A[\gamma]}, \qI_{A[\gamma]}\rangle$
%}

\begin{figure}
\boxit[The nth universe a la Tarski has a universe structure:]{
\begin{mathpar}
\\
\infer{\Gamma \vdash (\UU_n)_\Gamma = (\UU_n)_{\Gamma'}}
{\Gamma  = \Gamma' \vdash}
\and
\infer{\Gamma \vdash \Ta_n(a) = \Ta_n(a' )}
{\Gamma \vdash a = a' : (\UU_n)_\Gamma}
\and
\infer{\Gamma \vdash \Pihat^n(a,b) = \Pihat^n(a',b') : (\UU_n)_\Gamma}
{\Gamma \vdash a = a' : (\UU_n)_\Gamma\and\Gamma.a \vdash b = b' : (\UU_n)_{\Gamma.a}}
\and
\infer{\Gamma \vdash \Ta_n(\Pihat^n(a,b)) = \Pi(a,b)}
{\Gamma \vdash a : (\UU_n)_\Gamma \and \Gamma . a \vdash b : (\UU_n)_{\Gamma . a}}
\and
\infer{\Gamma \vdash \Ta_n(\UUhat^n_\Gamma) = (\UU_n)_\Gamma}
{\Gamma \vdash a : (\UU_n)_\Gamma \and \Gamma . a \vdash b : (\UU_n)_{\Gamma . a}}
\and
\infer{(\UU_n)_\Gamma[\gamma] = (\UU_n)_\Delta}
{\Delta   \vdash   \gamma  :  \Gamma }
\and
\infer{ \Delta   \vdash   \Ta_n (a) [\gamma]  =  \Ta_n(a[\gamma] )}{ \Gamma   \vdash  a : (\UU_n)_\Gamma &  \Delta   \vdash   \gamma  :  \Gamma } 
\and
   \infer{ \Delta   \vdash   \Pihat^n (a, b) [\gamma] =  \Pihat^n (a [\gamma] , b [\gamma ^+]): (\UU_n)_\Delta}{ \Gamma   \vdash  a : (\UU_n)_\Gamma &  \Gamma .a \vdash  b : (\UU_n)_{\Gamma .a} &  \Delta   \vdash   \gamma  :  \Gamma }
\end{mathpar}
}
\label{fig:uu}
\end{figure}

\begin{figure}
\boxit[Rules for the code of a universe:]{
\begin{mathpar}
\\
\infer{\Gamma \vdash \UUhat^n_\Gamma =  \UUhat^n_{\Gamma'}: (\UU_{n+1})_\Gamma}{\Gamma = \Gamma' \vdash}
\and
\infer{\UUhat^n_\Gamma[\gamma] = \UUhat^n_\Delta : (\UU_{n+1})_\Delta}
{\Delta   \vdash   \gamma  :  \Gamma }
\end{mathpar}
}
\label{fig:uu-code}
\end{figure}

\begin{figure}
\boxit[Rules for cumulativity:]{
\begin{mathpar}
\\
\infer{\Gamma \vdash \t_n(a) = \t_n(a' ) :  (\UU_{n+1})_\Gamma}
{\Gamma \vdash a = a' : (\UU_n)_\Gamma}
\and
\infer{\Gamma \vdash \t_n(\Pihat^n(a,b)) = \Pihat^{n+1}(\t_{n+1}(a),\t_{n+1}(b)) : (\UU_{n+1})_\Gamma}
{\Gamma \vdash a : (\UU_n)_\Gamma \and \Gamma . a \vdash b : (\UU_n)_{\Gamma . a}}
\and
\infer{ \Delta   \vdash   \t_n (a) [\gamma]  =  \t_n(a[\gamma] ) : (\UU_{n+1})_\Delta}{ \Gamma   \vdash  a : (\UU_n)_\Gamma &  \Delta   \vdash   \gamma  :  \Gamma } 

 \end{mathpar}
  }
  \label{fig:uu-cumulativity}
\end{figure}

Moreover, our syntax is annotated in order to ensure that a raw term has a unique (up to judgmental
equality) type given by the function $\typeof$, and that a type has a unique (up to judgemental equality) context given by the function
$\ctxof$. Similarly, $\domain$ and $\codomain$ return the unique domain and codomain of a substitution.

\begin{lem}\label{lemma:unique_typing}
  We have the following:
  \begin{itemize}
  \item If $ \Gamma   \vdash  A$ is derivable, then $  \Gamma  = \ctxof (A)\vdash  $ is also derivable.
  \item If $ \Gamma   \vdash  a : A$ is derivable, then $ \Gamma  = \ctxof (A)\vdash   $ and $
\Gamma   \vdash A = \typeof (a)$ are derivable.
  \item If $ \Delta   \vdash   \gamma  :  \Gamma $ is derivable, then $  \Delta  = \domain(
\gamma )\vdash  $ and $ \Gamma  = \codomain( \gamma )\vdash   $ are derivable.
  \end{itemize}
\end{lem}

\subsection{The syntactic $\Pi\UU$-tower-cwf $\T$ a la Tarski}
We can now define a term model as the syntactic cwf obtained by the well-formed contexts, substitutions, types, and terms, modulo judgmental equality. We use brackets for equivalence classes in this definition. (Note that brackets are also used for substitution in types and terms. However, this should not cause confusion since we will soon drop the equivalence class brackets.)

\begin{defi}
The term model $\T$ is given by:
\begin{itemize}
\item $\Ctx_\T = \{ {\Gamma}\ |\ \Gamma \vdashS \} /\!\! =^c$, where
  ${\Gamma} =^c {\Gamma}'$ if ${\Gamma} = {\Gamma}' \vdashS$ is
  derivable.
\item
  $\Sub_\T([{\Gamma}],[{\Delta}]) = \{ \gamma\ |\ \Gamma \vdashS \gamma
  : {\Delta} \} /\!\! =^{\Gamma}_{\Delta}$
  where $\gamma =^{\Gamma}_{\Delta} \gamma'$ iff
  ${\Gamma} \vdashS \gamma = \gamma' : {\Delta}$ is derivable. Note that
  this makes sense since it only depends on the equivalence class of
  $\Gamma$ (morphisms and morphism equality are preserved by object
  equality).
\item $\Ty_\T([{\Gamma}]) = \{ A\ |\ \Gamma \vdashS A
  \}/=^{\Gamma}$ where $A =^{\Gamma} B$ if $\Gamma \vdashS A =
  B$.
\item $\Tm_\T([{\Gamma}],[A]) = \{ a\ |\ \Gamma \vdashS a: A\} / =^{\Gamma}_A$ where $a =^{\Gamma}_A
a'$ if $\Gamma \vdashS a = a' : A$. 
\end{itemize}
The $\Pi\UU$-tower-cwf operations on $\T$ can now be defined in a straightforward way. For example, if $\Delta \vdash \theta : \Theta$, $\Gamma \vdash \delta : \Delta$, we define
$
[\theta ] \circ_\T [\delta] = [\theta \circ \delta],
$
which is well-defined since composition preserves equality.
\end{defi}
\subsection{Initiality of $\T$}
\label{sec:freenessT}

We shall show that $\T$ is an initial $\Pi\UU$-tower-cwf in the sense that for an arbitrary $\Pi\UU$-tower-cwf $\C$, there exists a unique strict $\Pi\UU$-tower-cwf morphism $\T  \rightarrow  \C$. 

We begin by defining four mutually recursive partial dependent interpretation functions, one for each syntactic category. Let $B$ is a partial family of sets indexed by $A$, that is, a set of pairs, such that $(x,Y), (x,Y') \in B$ implies $x \in A$ and $Y=Y'$. Then a {\em partial dependent function} $f :  (x \in A) \rightharpoonup B(x)$  is a set of pairs, such that $(x,y), (x,y') \in f$ implies that $x \in A$, $B(x)$ is defined and $y = y' \in B(x)$.

Our four partial dependent interpretation functions are:
\begin{eqnarray*}
\intCtxU{-} &:& \RawCtx\ \rightharpoonup \Ctx_\C\\
\intSubU{-}&:& (\gamma \in \RawSub)\ \rightharpoonup \
\Sub_\C(\intCtxU{\domain(\gamma)}, \intCtxU{\codomain(\gamma)})\\
\intTyU{-}&:& (A \in \RawTy)\ \rightharpoonup\ \Ty_\C(\intCtxU{\ctxof(A)})\\
\intTmU{-}&:& (a \in\RawTm)\ \rightharpoonup\
\Tm_\C (\intCtxU{\ctxof(\typeof(a))}, \intTyU{\typeof(a)})
\end{eqnarray*}
where $\RawCtx$ denotes the set of raw contexts, $\RawSub$ the set of raw substitutions, $\RawTy$ the set of raw types, and $\RawTm$ the set of raw terms as defined by the grammar in Section \ref{sec:grammar}). 
%, and that $\Sub_\C$ is the set of all substitutions (arrows), $\Ty_\C$ is the set of all types, and $\Tm_\C$ is the set of all terms in $\C$. 
We often skip the superscripts in these partial interpretation functions. The clauses for the pure cwf-combinators are
\[
\begin{array}{rclcrclcrcl}
\inte{1} &=& 1_\C 						&&
\inte{\gamma' \circ \gamma} &= & \inte{\gamma'} \circ_\C \inte{\gamma}&&
\inte{ \langle  \rangle_ \Gamma  } &=&  (\langle  \rangle_\C) _{ \inte \Gamma  }
\\
\intCtx { \Gamma .A} &=& \ \inte \Gamma ._\C \inte{A}	&&
\inte{\id_{\Gamma}} & = &\ {(\idC)}_{\inte{\Gamma}}	&&
\inte {a[\gamma]} &=& \inte a[\inte \gamma]_\C
\\
%\inte {o} &=& o_\C					&&
\inte{ \langle  \gamma , a \rangle_A } &=& \langle \inte \gamma , \inte a \rangle_\C&&
\inte {\qI_A} &= & (\qI_\C)_{\inte A}
\\
\inte{A[\gamma]} &=& \inte A [\inte \gamma]_\C		&&
\inte {\p_A} &= & (\p_\C)_{\inte A} 
\end{array}
\]
Clauses for $\Pi$:
\begin{eqnarray*}
\inte{\Pi(A,B)} &=& \Pi_\C(\inte{A},\inte{B})\\
\inte{\app(A,B,c,a)} &=& \app_\C(\inte{A},\inte{B},\inte{c},\inte{a})\\
\inte{\lambda(A,b)} &=& \lambda_\C(\inte{A},\inte{b})
\end{eqnarray*}
Clauses for a tower of universes a la Tarski:
\begin{eqnarray*}
\intTyU{(\UU_n)_\Gamma} &=& ((\UU_n)_\C)_{\intCtxU{\Gamma}}\\
\intTyU{\Ta_n(a)} &=& (\Ta_n)_\C(\intTmU{a})\\
\intTmU{\Pihat^n(a,b)}&=& (\Pihat^n)_\C(\intTmU{a},\intTmU{b})\\
\intTmU{\UUhat^n_\Gamma}&=& ((\UUhat^n)_\C)_{\intCtxU{\Gamma}}
\end{eqnarray*}
The clause for cumulativity:
\begin{eqnarray*}
\intTmU{\t_n(a)} &=& (\t_n)_\C(\intTmU{a})\\
\end{eqnarray*}
Partiality arises because, for instance, $\inte{\gamma'} \circ_\C {\inte{\gamma}}$ is only defined when $\inte{\gamma'}$ and $\inte{\gamma}$ are defined and $\dom(\inte{\gamma'}) = \cod(\inte{\gamma})$.
However, we can prove by induction on the inference rules that the interpretation of equal well-formed contexts, equal well-typed substitutions, equal well-formed types, and equal well-typed terms are always defined and equal:
\begin{lem}\hfill
\label{lemma:interp_defined}
  \begin{itemize}
  %\item If $\Gamma \vdash$, then $\intCtx\Gamma$ is defined and in $\Ctx_\C$
  \item If $\Gamma = \Gamma' \vdash$, then
    $\intCtx{\Gamma} = \intCtx{\Gamma'} \in \Ctx_\C$ are defined and equal.
  %\item If $\Delta \vdash \gamma : \Gamma$, then
  %  $\inte{\gamma}$ is defined and in $\Sub_\C(\intCtx \Delta, \intCtx \Gamma)$
  \item If $\Delta \vdash \gamma = \gamma' : \Gamma$, then
    $\inte{\gamma} = \inte{\gamma'} \in \Sub_\C(\intCtx{\Delta},{\intCtx{\Gamma}})$ are defined and
equal.
  %\item If $\Gamma \vdash A$, then $\inte{A}$ is defined and in $\Ty_\C(\intCtx \Gamma)$.
  \item If $\Gamma \vdash A = A'$, then
    $\inte{A} = \inte{A'} \in \Ty_\C(\intCtx{\Gamma})$ are defined and equal.
  %\item If $\Gamma \vdash a : A$, then $\inte{a}$ is defined and in $\Tm_\C(\intCtx{\Gamma}, \inte{A})$.
  \item If $\Gamma \vdash a = a' : A$, then
    $\inte{a} = \inte{a'} \in \Tm_\C(\intCtx{\Gamma},\inte{A})$ are defined and equal.
  \end{itemize}
\end{lem}

It follows in particular that if we have $\Gamma \vdash$ (which abbreviates $\Gamma = \Gamma \vdash$), then $\intCtx{\Gamma}$ is defined -- and likewise for the other
reflexive judgements.

%$$\begin{aligned}
%\inte{1_\Gamma} &=&& \text{id}_\C(\Gamma)  & && \intCtx { \Gamma .A} &=&& \ \inte \Gamma ._\C \inte{A} \\
%\inte{\gamma' \circ \gamma} &= && \inte{\gamma'} \circ_\C
%{\inte{\gamma}} & \quad && \inte{\id_{\Gamma}} & = &&\ {(\idC)}_{\inte{\Gamma}} \\
%\inte{ \langle  \gamma , a \rangle_A } &=&& (\langle \inte \gamma , \inte a \rangle_\C)_{\inte A} & && \inte{ \langle  \rangle_ \Gamma  } &=&&  (\langle  \rangle_\C) _{ \inte \Gamma  }\\
%\inte{A[\gamma]} &=& & \inte A [\inte \gamma]_\C& && \inte {a[\gamma]} &=&& \inte a[\inte \gamma]_\C \\
%\inte {\p_A} &= && (\mathrm{p}_\C)_{\inte A} & && 
%\inte {\qI_A} &= && (\mathrm{q}_\C)_{\inte A}\\
%\inte {o} &=&& o_\C \\
%\end{aligned}$$

%Note that we explicitly index the operations in the model by $\C$. These indices will be omitted later on in the paper.
%

Hence, we can define total interpretation functions on the term model by restricting the partial 
interpretation function to the well-formed contexts, etc, and then lift it to the quotient:
\begin{eqnarray*}
\iniCtx{-} &:& \Ctx_\T\ \arrow\ \Ctx_\C\\
\iniSub{[\Gamma]}{[\Delta]}{-} &:&
 \Sub_\T([\Gamma],{[\Delta]}) \ \arrow \
 \Sub_\C(\iniCtx{[\Gamma]},{\iniCtx{[\Delta]}})\\
\iniTy{[\Gamma]}{-} &:& \Ty_\T([\Gamma])\ \arrow\ \Ty_\C(\iniCtx{[\Gamma]})\\
\iniTm{[\Gamma]}{[A]}{-} &:& \Tm_\T([\Gamma],[A])\ \arrow\ \Tm_\C(\iniCtx{[\Gamma]},\iniTy{[\Gamma]}{[A]})
\end{eqnarray*}
by
\begin{eqnarray*}
\iniCtx{[\Gamma]} &=& \inte{\Gamma}\\
\iniSub{[\Gamma]}{[\Delta]}{[\gamma]} &=& \inte{\gamma}\\
\iniTy{[\Gamma]}{[A]} &=& \inte{A}\\
\iniTm{[\Gamma]}{[A]}{[a]} &=& \inte{a}
\end{eqnarray*}
which is well-defined by Lemma \ref{lemma:unique_typing}.

The four total interpretation functions together defines a strict $\Pi\UU$-tower-cwf
morphism $\iniCtx{-} :\T  \rightarrow  \C$.

To prove that it is unique, we assume that $F : \T \arrow \C$ is another strict $\Pi\UU$-tower-cwf
morphism, and prove by induction on the inference rules (the pers) that if $\Gamma = \Gamma' \vdash$
then $F[\Gamma] = \iniCtx{[\Gamma]}$, etc.  Most of the rules for a tower of universes are analogous to the rules for one universe, and hence the proof for those rules are easily modified.

In the non-cumulative case we have one new rule to consider:
$$
\infer{\Gamma \vdash \UUhat^n_\Gamma =  \UUhat^n_{\Gamma'}: (\UU_{n+1})_\Gamma}{\Gamma = \Gamma' \vdash}
$$
To show that uniqueness is preserved by this rule we assume the the induction hypothesis $F([\Gamma]) = \iniCtx{[\Gamma]}$ and derive 
$$
F([\UUhat^n_\Gamma]) = (\UUhat^n_\C)_{F([\Gamma])} = (\UUhat^n_\C)_{\iniCtx{[\Gamma]}} 
= \iniTm{[\Gamma]}{[(\UU_{n+1})_\Gamma]}{[\UUhat^n_\Gamma]}
$$

There are three more rules for cumulativity, but we don't display the derivations here.

\newpage
\section{An initial $\Pi\UU$-tower-cwf a la Russell}

\subsection{Raw syntax of normal and neutral terms}

It seems that we need normal terms to construct an initial model a la Russell. Then we do not need annotations on $\app(A,B,c,a)$. There is a difference between the cumulative and the non-cumulative system.
\begin{eqnarray*}
\Gamma \in \RawCtx &::=& 1  \ |\ \Gamma.a\\
\gamma \in \RawSub \ &::=& \langle\rangle_\Gamma \ | \langle \gamma, a \rangle_a\\
a \in \RawTm &::=& ne  \ |\ \lambda(a,a) \ |\ \Pi(a,a)  \ |\  {(\UU_n)}_\Gamma\\
ne \in Ne &::=& var(i)   \ |\ \ap(ne,a) 
\end{eqnarray*}


\subsection{Raw Syntax}

To define a Russell-style initial $\Pi\UU$-tower-cwf we start with a grammar with a common syntactic category $\RawTm$ for both types and terms:
\begin{eqnarray*}
\Gamma \in \RawCtx &::=& 1  \ |\ \Gamma.a\\
\gamma \in \RawSub \ &::=& \gamma \circ \gamma \ |\ \id_\Gamma \ |\ \langle\rangle_\Gamma \ |\ \p_{a} \ |\ \langle \gamma, a \rangle_a\\
a \in \RawTm &::=& a [\gamma] \ |\ \qI_a\  |\   \lambda(a,a) \ |\ 
\ap(a,a,a,a) |\  \Pi(a,a)  \ |\  {(\UU_n)}_\Gamma
\end{eqnarray*}
There are three new clauses for $\ctxof$ and $\typeof$ for $\UU$:
\begin{eqnarray*}
\ctxof({(\UU_n)}_\Gamma) &=& \Gamma\\
\typeof(\Pi(a,b))&=& \typeof(a)\\
\typeof({(\UU_n)}_\Gamma) &=& {(\UU_{n+1})}_\Gamma\\
(\typeof(\N_\Gamma) &=& {(\UU_{0})}_\Gamma)
\end{eqnarray*}

\subsection{Inference rules}
The inference rules for cwfs with $\Pi$-types are as before, except that they range over the new sets of raw contexts, substitutions, types, and terms. Moreover, we add the following new rules for a tower of universes a la Russell:
\begin{figure}
\boxit[The nth universe a la Russell has a universe structure:]{
\begin{mathpar}
\\
\infer{\Gamma \vdash (\UU_n)_\Gamma = (\UU_n)_{\Gamma'}}
{\Gamma  = \Gamma' \vdash}
\and
\infer{\Gamma \vdash a = a'}
{\Gamma \vdash a = a' : (\UU_n)_\Gamma}
\and
\infer{\Gamma \vdash \Pi(a,b) = \Pi(a',b') : (\UU_n)_\Gamma}
{\Gamma \vdash a = a' : (\UU_n)_\Gamma\and\Gamma.a \vdash b = b' : (\UU_n)_{\Gamma.a}}
\and
\infer{(\UU_n)_\Gamma[\gamma] = (\UU_n)_\Delta}
{\Delta   \vdash   \gamma  :  \Gamma }
\and
   \infer{ \Delta   \vdash   \Pi(a, b) [\gamma] =  \Pi(a [\gamma] , b [\gamma ^+]): (\UU_n)_\Delta}{ \Gamma   \vdash  a : (\UU_n)_\Gamma &  \Gamma .a \vdash  b : (\UU_n)_{\Gamma .a} &  \Delta   \vdash   \gamma  :  \Gamma } \
\end{mathpar}
  }
  \label{fig:uu}
\end{figure}

\begin{figure}
\boxit[The nth universe is in the next:]{
\begin{mathpar}
\\
\infer{\Gamma \vdash (\UU_n)_\Gamma =  (\UU_n)_{\Gamma'}: (\UU_{n+1})_\Gamma}{\Gamma = \Gamma' \vdash}
\and
\infer{(\UU_n)_\Gamma[\gamma] = (\UU_n)_\Delta : (\UU_{n+1})_\Delta}
{\Delta   \vdash   \gamma  :  \Gamma }
\end{mathpar}
}
\label{fig:uu-code}
\end{figure}

\begin{figure}
\boxit[Cumulativity:]{
\begin{mathpar}
\\
\infer{\Gamma \vdash a = a'  :  (\UU_{n+1})_\Gamma}
{\Gamma \vdash a = a' : (\UU_n)_\Gamma}
 \end{mathpar}
  }
  \label{fig:uu}
\end{figure}
\def\R{\mathcal{R}}
\subsection{The syntactic $\Pi\UU$-tower-cwf $\R$ a la Russell}
The term model a la Russell is defined in the same way as the term model a la Tarski, but based on the grammar and inference rules a la Russell.

\subsection{Initiality of $\R$}
The interpretation functions are as before, except that both the type and the term interpretation functions range over $\RawTm$:
\begin{eqnarray*}
\intCtxU{-} &:& \RawCtx\ \rightharpoonup \Ctx_\C\\
\intSubU{-}&:& (\gamma \in \RawSub)\ \rightharpoonup \
\Sub_\C(\intCtxU{\domain(\gamma)}, \intCtxU{\codomain(\gamma)})\\
\intTyU{-}&:& (A \in \RawTm)\ \rightharpoonup\ \Ty_\C(\intCtxU{\ctxof(A)})\\
\intTmU{-}&:& (a \in\RawTm)\ \rightharpoonup\
\Tm_\C (\intCtxU{\ctxof(\typeof(a))}, \intTyU{\typeof(a)})
\end{eqnarray*}
The new clauses for the interpretation function for the tower of universes
\begin{eqnarray*}
\intTyU{(\UU_n)_\Gamma} &=& ((\UU_n)_\C)_{\intCtxU{\Gamma}} \in \Ty_\C(\intCtxU{\Gamma})\\
\intTyU{a} &=& (\Ta_n)_\C(\intTmU{a}) \in \Ty_\C(\intCtxU{\Gamma})\\
\intTmU{\Pi(a,b)}&=& \Pihat^n_\C(\intTmU{a},\intTmU{b}) \in \Tm_\C(\intCtxU{\Gamma},((\UU_n)_\C)_{\intCtxU{\Gamma}})\\
\intTmU{(\UU_n)_\Gamma} &=& (\UUhat^n_\C)_{\intCtxU{\Gamma}} \in \Tm_\C(\intCtxU{\Gamma},((\UU_{n+1})_\C)_{\intCtxU{\Gamma}})
\end{eqnarray*}
provided
$\intTmU{a} \in \Tm_\C(\intCtxU{\Gamma},((\UU_n)_\C)_{\intCtxU{\Gamma}})$ and 
$\intTmU{b} \in \Tm_\C(\intCtxU{\Gamma.a},((\UU_n)_\C)_{\intCtxU{\Gamma.a}})$.

The proof that this is the unique $\Pi\UU$-tower-cwf morphism into $\C$ is similar to proof for the  $\Pi\UU$-tower-cwf $\T$.

\begin{thm}\label{theom:initial_cwf}
  $\R$ is an initial $\Pi\UU$-tower-cwf.
\end{thm}

\subsection{The $\Pi\UU$-cwf isomorphism between $\T$ and $\R$}
We can now look at the instances of the interpretation morphisms in both directions.

{\bf Tarski to Russell.} Assume that $\Gamma$ is a Tarski style context $\Gamma^\R$ is the corresponding Russell style context, so that $\intCtx{\Gamma}^\Ctx = [ \Gamma^\R ]$. Similarly, let $a$ and $b$ be Tarski style terms and $a^\R$ and $b^\R$ are the corresponding Russell style terms. Then
\begin{eqnarray*}
 \intTyU{(\UU_n)_\Gamma} &=& ((\UU_n)_\R)_{\intCtxU{\Gamma}}
 = [(\UU_n)_{\Gamma^\R}]\\
\intTyU{\Ta_n(a)} &=& (\Ta_n)_\R(\intTmU{a}) 
%= \Ta_\T(\iniTm{[\Gamma]}{[A]}{[a]}) 
= [a^\R]\\
%\intTyU{a[\gamma]}&=& \Ta_\R(\intTmU{a[\gamma]}) = [ a^\R [ \gamma^\R ] ]\\
\intTyU{\qI_{(\UU_n)_\Gamma)}}&=& (\Ta_n)_\R(\intTmU{\qI_{(\UU_n)_\Gamma}}) = [ (\qI_{(\UU_n)_{\Gamma^\R}} ]\\
\intTyU{\lambda(A,b)}&=& (\Ta_n)_\R(\intTmU{\lambda(A,b)}) = [ \lambda(A^\R ,b^\R ) ]\\
\intTyU{\app(A,B,c,a)}&=& (\Ta_n)_\R(\intTmU{\app(A,B,c,a}) = [ \app(A^\R ,B^\R ,c^\R ,a^\R ) ]\\
\intTmU{\Pihat^n(a,b)}&=& \Pihat^n_\R(\intTmU{a},\intTmU{b})
= [\Pi(a^\R,b^\R)]
\end{eqnarray*}
provided in the fourth clause $\typeof(\lambda(A,b)) = (\UU_n)_\Gamma$ for some $\Gamma$ and in the fifth clause $\typeof(\app(A,B,c,a)) = (\UU_n)_\Gamma$ for some $\Gamma$.

The other clauses for the raw expressions remain the same.

{\bf Russell to Tarski.} 
Assume instead that $\Gamma$ is a Russell style context $\Gamma^\T$ is the corresponding Tarski style context, so that $\intCtx{\Gamma}^\Ctx = [ \Gamma^\T ]$. Similarly, let $a$ and $b$ be Russell style terms and $a^\T$ and $b^\T$ are the corresponding Tarski style terms. Then
\begin{eqnarray*}
\intTyU{\UU_\Gamma} &=& [ \UU_{\Gamma^\T} ]\\
\intTmU{\Pi(a,b)}&=& \hat{\Pi}_\T(\intTmU{a},\intTmU{b}) = [ \hat{\Pi}(a^\T,b^\T) ]\\
%\intTyU{a[\gamma]}&=& \Ta_\T(\intTmU{a[\gamma]}) = [ \Ta(a^\T [ \gamma^\T ] )]\\
\intTyU{\qI_{(\UU_\Gamma)}}&=& \Ta_\T(\intTmU{\qI_{(\UU_\Gamma)}}) = [ \Ta(\qI_{(\UU_{\Gamma^\T})}) ]\\
\intTyU{\lambda(A,b)}&=& \Ta_\T(\intTmU{\lambda(A,b)}) = [ \Ta(\lambda(A^\T ,b^\T )) ]\\
\intTyU{\app(A,B,c,a)}&=& \Ta_\T(\intTmU{\app(A,B,c,a}) = [ \Ta(\app(A^\T ,B^\T ,c^\T ,a^\T )) ]
\end{eqnarray*}
The other clauses for the raw expressions remain the same.

%\begin{lemma}
{\bf Lemma.}
It follows that
\begin{eqnarray*}
\intTyU{a} &=& [ \Ta(a^\T) ]
\end{eqnarray*}
whenever $a^\T \in  \Tm_\T([\Gamma^\T],[\UU_{\Gamma^\T}])$. 
%\end{lemma}

%\begin{theorem}
{\bf Theorem.} The interpretation morphisms form an isomorphism of $\Pi\UU$-cwfs. 

If $\Gamma$ is a Tarski-style context, then $[ \Gamma^{\R\T} ] = [ \Gamma ]$, etc. 

If $\Gamma$ is a Russell-style context, then $[ \Gamma^{\T\R} ] = [ \Gamma ]$, etc.
%\end{theorem}


\bibliographystyle{plain}
\bibliography{refs}
\end{document}
